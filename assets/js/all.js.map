{"version":3,"sources":["_bike.js","_index.js","_valid.js"],"names":["pos_latitude","pos_longitude","bikeMap","getBikeStation_nearby_lend","endpoint","axios","get","headers","getAuthorizationHeader","then","response","thisData","data","forEach","el","lat","lon","stationName","StationPosition","PositionLat","PositionLon","StationName","Zh_tw","console","log","StationUID","lendIcon","L","divIcon","iconSize","iconAnchor","popupAnchor","html","popUpContent","StationAddress","marker","icon","addTo","bindPopup","setPopupContent","getBikeStation_nearby2_lend","error","targetStation","filter","stationIcon","document","querySelector","innerHTML","AvailableRentBikes","AvailableReturnBikes","getBikeStation_nearby2_popUp","stationRentBikes","getElementById","stationReturnBikes","getPosition","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","success","pos","coords","latitude","longitude","accuracy","navigator","geolocation","watchPosition","alert","bike_init","map","center","zoom","setView","tileLayer","attribution","maxZoom","id","tileSize","zoomOffset","accessToken","posGpsIcon","gpsYoubike","lottie","loadAnimation","wrapper","lottie_GPS","animType","loop","autoplay","path","play","window","onload","setTimeout","logoYoubike","lottie_youbike","AppID","AppKey","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","HMAC","getHMAC","Authorization"],"mappings":"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","file":"all.js","sourcesContent":["let pos_latitude;\r\nlet pos_longitude;\r\nvar bikeMap;\r\n\r\n// 取得附近一公里內 30 筆站點資訊:在地圖上呈現 lend 租車標記 icon\r\nfunction getBikeStation_nearby_lend(){\r\n  const endpoint = `https://ptx.transportdata.tw/MOTC/v2/Bike/Station/NearBy?$top=30&$spatialFilter=nearby(${pos_latitude},${pos_longitude},1000)&$format=JSON`;\r\n\r\n  axios.get(endpoint,\r\n     {\r\n        headers: getAuthorizationHeader()\r\n     })\r\n    .then(function (response) {\r\n      const thisData = response.data;\r\n    \r\n      thisData.forEach(el=>{\r\n        let lat;\r\n        let lon;\r\n        let stationName = \"\";\r\n        \r\n        if(el.StationPosition.PositionLat) {\r\n          lat = el.StationPosition.PositionLat;\r\n        } else {\r\n          lat = pos_latitude;\r\n        }\r\n        if(el.StationPosition.PositionLon) {\r\n          lon = el.StationPosition.PositionLon;\r\n        } else {\r\n          lon = pos_longitude;\r\n        }\r\n        \r\n        if(el.StationName) {\r\n          stationName = el.StationName.Zh_tw;\r\n        } else {\r\n          stationName = \"\";\r\n        }\r\n        \r\n        console.log(el.StationUID);\r\n        console.log(`lat:${lat},lon:${lon},stationName:${stationName}`);\r\n        \r\n        // 站點圖示\r\n        let lendIcon = L.divIcon({\r\n          iconSize: [0,0],\r\n          iconAnchor: [22, 94],\r\n          popupAnchor: [-3, -76],\r\n          html: `\r\n          <div class=\"lendIcon\">\r\n            <img src=\"https://i.imgur.com/FlALjW8.png\"/>\r\n            <div class=\"bikeNum\">\r\n              <span class=\"${el.StationUID}\"></span>\r\n            </div>\r\n          </div`\r\n        });\r\n        \r\n        // popUp 內容\r\n        let popUpContent = `\r\n          <p class=\"fz-5 fw-bold my-4\">${stationName}</p>\r\n          <a class=\"rounded-pill bg-blue text-white py-2 px-3 mb-2\" href=\"https://www.google.com/maps/search/?api=1&map_action=map&zoom=16&query=(${el.StationAddress.Zh_tw})\">\r\n            使用 GoogleMap 導航\r\n          </a>\r\n          <div class=\"row d-flex\">\r\n            <div class=\"col-6 py-3 fz-3 fw-bold text-center\">\r\n              可借車輛\r\n              <p id=\"${el.StationUID}_RentBikes\" class=\"fz-10 fw-bold text-success m-0\"></p>\r\n            </div>\r\n            <div class=\"col-6 py-3 fz-3 fw-bold text-center\">\r\n              可停空位\r\n              <p id=\"${el.StationUID}_ReturnBikes\" class=\"fz-10 fw-bold text-warning m-0\"></p>\r\n            </div>\r\n          </div>`;\r\n        \r\n        // 標記站點 icon & 為站點綁上 popUp 彈跳視窗\r\n        L.marker([lat,lon], {icon: lendIcon}).addTo(bikeMap)\r\n        .bindPopup().setPopupContent(popUpContent);\r\n        \r\n        // 用 StationUID 查詢站點借還車輛資訊\r\n        getBikeStation_nearby2_lend(el.StationUID);\r\n        \r\n      });\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    }); \r\n\r\n}\r\n\r\n\r\n// 取得附近一公里內 30 筆站點資訊:在 icon 上標記 lend 可借車輛數量\r\nfunction getBikeStation_nearby2_lend(StationUID){\r\n  const endpoint = `https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/NearBy?$top=30&$spatialFilter=nearby(${pos_latitude},${pos_longitude},1000)&$format=JSON`;\r\n  axios.get(endpoint,\r\n     {\r\n        headers: getAuthorizationHeader()\r\n     }\r\n    )\r\n    .then(function (response) {\r\n      const thisData = response.data;\r\n      const targetStation = thisData.filter(el=> el.StationUID === StationUID);\r\n      const stationIcon = document.querySelector(`.${StationUID}`);\r\n      stationIcon.innerHTML = targetStation[0].AvailableRentBikes;\r\n      console.log(targetStation[0]);\r\n      console.log(`可借數量：${targetStation[0].AvailableRentBikes}`);\r\n      console.log(`還車空位：${targetStation[0].AvailableReturnBikes}`);\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    }); \r\n\r\n}\r\n\r\n\r\n// 點擊 popUp：呈現借還車輛數量資訊\r\nfunction getBikeStation_nearby2_popUp(StationUID){\r\n  const endpoint = `https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/NearBy?$top=30&$spatialFilter=nearby(${pos_latitude},${pos_longitude},1000)&$format=JSON`;\r\n  axios.get(endpoint,\r\n     {\r\n        headers: getAuthorizationHeader()\r\n     }\r\n    )\r\n    .then(function (response) {\r\n      const thisData = response.data;\r\n      const targetStation = thisData.filter(el=> el.StationUID === StationUID);\r\n      const stationIcon = document.querySelector(`.${StationUID}`);\r\n      const stationRentBikes = document.getElementById(`${StationUID}_RentBikes`);\r\n      const stationReturnBikes = document.getElementById(`${StationUID}_ReturnBikes`);\r\n      stationIcon.innerHTML = targetStation[0].AvailableRentBikes;\r\n      stationRentBikes.innerHTML = targetStation[0].AvailableRentBikes;\r\n      stationReturnBikes.innerHTML = targetStation[0].AvailableReturnBikes;\r\n      console.log(stationIcon);\r\n      console.log(targetStation[0]);\r\n      console.log(`可借數量：${targetStation[0].AvailableRentBikes}`);\r\n      console.log(`還車空位：${targetStation[0].AvailableReturnBikes}`);\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    }); \r\n\r\n}\r\n\r\n// 取得使用者所在位置\r\nfunction getPosition(){\r\n  // 錯誤訊息處理\r\n  function error(error){\r\n    switch(error.code)  {\r\n      case error.PERMISSION_DENIED:\r\n          console.log(\"User denied the request for Geolocation.\");\r\n          break;\r\n\r\n      case error.POSITION_UNAVAILABLE:\r\n          console.log(\"Location information is unavailable.\");\r\n          break;\r\n\r\n      case error.TIMEOUT:\r\n          console.log(\"The request to get user location timed out.\");\r\n          break;\r\n\r\n      case error.UNKNOWN_ERROR:\r\n          console.log(\"An unknown error occurred.\");\r\n          break;\r\n    }\r\n  }\r\n\r\n  function success(pos){\r\n    pos_latitude = pos.coords.latitude;\r\n    pos_longitude = pos.coords.longitude;\r\n    console.log(`Accuracy：${pos.coords.accuracy}`);\r\n    console.log(pos.coords.latitude,pos.coords.longitude);\r\n  }\r\n  \r\n  if(navigator.geolocation){\r\n    // navigator.geolocation.getCurrentPosition(success, error);\r\n    navigator.geolocation.watchPosition(success, error);\r\n  } else {\r\n    alert('您的裝置不支援地理位置功能');\r\n  }\r\n}\r\n\r\n// Bike 頁面：初始化渲染／呈現地圖圖資／標記 GPS 圖示／標記附近站點\r\nfunction bike_init(){\r\n  console.log(`pos_latitude：${pos_latitude}`);\r\n  console.log(`pos_longitude：${pos_longitude}`);\r\n  \r\n  // 呈現地圖圖資\r\n  bikeMap = L.map('bikeMap_show', {\r\n      center: [pos_latitude,pos_longitude],\r\n      zoom: 16\r\n  }).setView([pos_latitude,pos_longitude], 16);\r\n\r\n  L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\r\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n      maxZoom: 18,\r\n      id: 'mapbox/streets-v11',\r\n      tileSize: 512,\r\n      zoomOffset: -1,\r\n      accessToken: 'pk.eyJ1Ijoic3lsdmlhaC10dyIsImEiOiJja3c2Nzl2eHUweXlmMnFtZTRjb2VjcDQxIn0.Gx5M_zr8rDs4T-jawF2UDQ'\r\n  }).addTo(bikeMap);\r\n\r\n  // 目前所在位置 GPS 圖示內容\r\n  let posGpsIcon = L.divIcon({\r\n      iconSize: [70,70],\r\n      html: `<div id=\"lottie_GPS\"></div>`\r\n  });\r\n  \r\n  // 在地圖上標記所在位置 GPS 圖示\r\n  L.marker([pos_latitude,pos_longitude], {icon: posGpsIcon}).addTo(bikeMap);\r\n\r\n  // 顯示所在位置 GPS 圖示 lottie 動畫\r\n  const gpsYoubike = lottie.loadAnimation({\r\n    wrapper: lottie_GPS,\r\n    animType: 'svg',\r\n    loop: true,\r\n    autoplay: false,\r\n    path: './assets/images/youbike_GPS.json'\r\n  });\r\n  gpsYoubike.play();\r\n\r\n  // 標記附近站點 - 可借車輛資訊\r\n  getBikeStation_nearby_lend();\r\n\r\n}\r\n\r\n// Bike 頁面初始渲染：取得目前所在位置經緯度座標\r\nwindow.onload = getPosition();\r\n\r\n// Bike 頁面初始渲染：延遲執行地圖載入\r\nsetTimeout(bike_init, 500);\r\n","const logoYoubike = lottie.loadAnimation({\r\n    wrapper: lottie_youbike,\r\n    animType: 'svg',\r\n    loop: true,\r\n    autoplay: false,\r\n    path: './assets/images/youbike.json'\r\n});\r\n\r\nlogoYoubike.play();\r\n","// header 驗證\r\nfunction getAuthorizationHeader() {\r\n    let AppID = '9eeb30e3588740618367a446631cbc3f';\r\n    let AppKey = 'CKTwBadJd3_0_EdqiXE0kEg8fTw';\r\n    let GMTString = new Date().toGMTString();\r\n    let ShaObj = new jsSHA('SHA-1', 'TEXT');\r\n    ShaObj.setHMACKey(AppKey, 'TEXT');\r\n    ShaObj.update('x-date: ' + GMTString);\r\n    let HMAC = ShaObj.getHMAC('B64');\r\n    let Authorization = 'hmac username=\\\"' + AppID + '\\\", algorithm=\\\"hmac-sha1\\\", headers=\\\"x-date\\\", signature=\\\"' + HMAC + '\\\"';\r\n    return { 'Authorization': Authorization, 'X-Date': GMTString }; \r\n}\r\n"]}