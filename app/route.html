<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>查詢自行車道 | Where’s YouBike 微笑單車．暢遊城市</title>
    <link
      href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
      rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/MarkerCluster.css"></link> 
    <link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/MarkerCluster.Default.css"></link> 
    <link rel="stylesheet" href="./assets/style/all.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GS2N6E9KFT"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-GS2N6E9KFT');
    </script>
  </head>

  <body>
    <!-- 導覽列 -->
    <nav class="navbar navbar-expand-lg navbar-light bg-primary border-bottom | fixed-top | py-3 py-lg-4">
        <div class="container position-relative">
            <!-- 微 笑 單 車 ． 暢 遊 城 市 Where's Youbike-logo -->
            <a class="navbar-brand mx-0" href="./index.html">
                <img width="245px" height="47px" class="d-none d-lg-block" src="./assets/images/WheresYoubike_logo.png" alt="WheresYoubike_logo" width="" height="">
                <span class="material-icons | d-block d-lg-none" alt="WheresYoubike_logo">
                    arrow_back_ios
                </span>
            </a>
            <select id="select_city" class="form-select form-select-md w-25 rounded-pill py-2 px-3" aria-label=".form-select-sm example">
                <option selected>選擇縣市</option>
                <option value="Taipei">臺北市</option>
                <option value="NewTaipei">新北市</option>
                <option value="Taoyuan">桃園市</option>
                <option value="Taichung">臺中市</option>
                <option value="Tainan">臺南市</option>
                <option value="Kaohsiung">高雄市</option>
                <option value="Keelung">基隆市</option>
                <option value="HsinchuCounty">新竹縣</option>
                <option value="MiaoliCounty">苗栗縣</option>
                <option value="ChanghuaCounty">彰化縣</option>
                <option value="NantouCounty">南投縣</option>
                <option value="YunlinCounty">雲林縣</option>
                <option value="ChiayiCounty">嘉義縣</option>
                <option value="Chiayi">嘉義市</option>
                <option value="PingtungCounty">屏東縣</option>
                <option value="YilanCounty">宜蘭縣</option>
                <option value="HualienCounty">花蓮縣</option>
                <option value="TaitungCounty">臺東縣</option>
                <option value="KinmenCounty">金門縣</option>
                <option value="PenghuCounty">澎湖縣</option>
            </select>
            <select id="select_route" class="form-select form-select-md w-25 rounded-pill py-2 px-3" aria-label=".form-select-sm example">
                <option selected>選擇路線</option>
                <option value=""></option>
            </select>
            <!-- 顯示站點 or 隱藏站點 -->
            <!-- <div class="nav">
                <div class="nav-item | switch-station">
                    <input class="switch-checkbox" id="stationSwitch" type="checkbox" name="stationSwitch">
                    <label class="switch-label" for="stationSwitch">
                        <span class="switch-txt" turnOn="顯示站點" turnOff="隱藏站點"></span>
                        <span class="switch-Round-btn"></span>
                    </label>
                </div>
            </div> -->
        </div>
    </nav>

    <!-- main 主內容區 -->
    <main class="map_main">
        <div id="map_showRoute">
            <img class="gps_currentPos" src="./assets/images/icons/GPS_nearby.png" alt="">
        </div>
    </main>



    <!-- scripts -->
      <!-- Lottie -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.5.9/lottie.min.js"></script>
      <!-- axios -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.4/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/3.2.0/sha.js"></script>
      <!-- Leaflet -->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
      <!-- markerCluster -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/leaflet.markercluster.js"></script>
      <!-- wicket -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wicket/1.3.8/wicket.min.js" integrity="sha512-aaiN+QIXD0N9Id865vSDEfttZJV9v8ZGh7jXMnYI2zbZhkSYOulS4IH0u4pC61/KXT20UedYzL5xi5siIg6mlw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://unpkg.com/leaflet-ant-path" type="text/javascript"></script>
      <!-- mine -->
    <script src="./assets/js/vendors.js"></script>
    <script src="./assets/js/all.js"></script>
    
    <script>
        // route 頁面：全域變數
        const routeMap = L.map('map_showRoute').setView([25.04, 121.54], 16);

        // 監聽"附近"圖示，重置當前位置
        const gps_currentPos = document.querySelector('.gps_currentPos');
        gps_currentPos.addEventListener('click',()=>{
            if(pos_lat && pos_lng){
                routeMap.setView([pos_lat,pos_lng], 16);
            } else {
                window.opener.location.href=window.opener.location.href;
                window.opener.location.reload();
            }
        });

        // 頁面初始渲染：取得目前所在位置經緯度座標並標記
        window.onload = getCurrentPos_route();

        // 監聽下拉式選單 select_city
        const select_city = document.getElementById('select_city');
        select_city.addEventListener('change',(e)=>{
            get_cityRoute(e.target.value);
        });
        // 監聽下拉式選單 select_route
        const select_route = document.getElementById('select_route');
        select_route.addEventListener('change',(e)=>{
            get_Route(e.target.value);
        });

    </script>
  </body>

</html>